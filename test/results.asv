%% Init
clear
close all
clc

%% Inputs
TEST_NAME_PREFIX = '10Clients-Test1';

%% Initializing results Data
VehiclesPositions = [load(['./' TEST_NAME_PREFIX '/VehiclesPostion-1.mat']),...
    load(['./' TEST_NAME_PREFIX '/VehiclesPostion-2.mat']),...
    load(['./' TEST_NAME_PREFIX '/VehiclesPostion-2.mat'])] ;
colors = {'*r';'+b';'.g'};
legendText = {'Simulation 1', 'Simulation 2', 'Simulation 3'};

positions = [];
for i=1:size(VehiclesPositions, 2)
    positions = [positions struct('x', [], 'y', [], 'distance', 0)];
end
for w=1:size(VehiclesPositions, 2)
    VehiclesPos = VehiclesPositions(w);
    VehiclesPos = VehiclesPos.VehiclesPosition;
    
    keys = VehiclesPos.keys;
    totalDistance = 0;
    for j = 1:VehiclesPos.Count
        hold on;
        position = VehiclesPos(cell2mat(keys(j)));
        for i=1:size(position, 1)-1
            distance = sqrt((position(i, 1) - position(i+1, 1))^2 + (position(i+1, 2) - position(i+1, 2))^2);
            positions(w).distance = positions(w).distance + distance;
        end
        positions(w).x = [positions(w).x; position(:, 1)];
        positions(w).y = [positions(w).y; position(:, 2)];
    end
    hold on;
    plot(positions(w).x, positions(w).y, colors{w});
end
legend(legendText);
error = 0;
for w=1:size(VehiclesPositions, 2)-1
    error = error + sqrt(sum(abs(positions(w).x - positions(w+1).x))^2 + sum(abs(positions(w).y - positions(w+1).y))^2);
end
max(positions(1).distance, positions(2).distance)
error = error/*100;
title(['Comparing Simulation results of ' TEST_NAME_PREFIX ' with Total Error of ' num2str(error) '%']);




